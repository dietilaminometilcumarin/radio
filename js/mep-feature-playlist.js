!function(t){t.extend(mejs.MepDefaults,{loopText:"Repeat On/Off",shuffleText:"Shuffle On/Off",nextText:"Next Track",prevText:"Previous Track",playlistText:"Show/Hide Playlist"}),t.extend(MediaElementPlayer.prototype,{buildloop:function(e,l,s,o){var i=t('<div class="mejs-button mejs-loop-button '+(e.options.loop?"mejs-loop-on":"mejs-loop-off")+'"><button type="button" aria-controls="'+e.id+'" title="'+e.options.loopText+'"></button></div>').appendTo(l).click((function(l){e.options.loop=!e.options.loop,t(o).trigger("mep-looptoggle",[e.options.loop]),e.options.loop?i.removeClass("mejs-loop-off").addClass("mejs-loop-on"):i.removeClass("mejs-loop-on").addClass("mejs-loop-off")}));this.loopToggle=this.controls.find(".mejs-loop-button")},loopToggleClick:function(){this.loopToggle.trigger("click")},buildshuffle:function(e,l,s,o){var i=t('<div class="mejs-button mejs-shuffle-button '+(e.options.shuffle?"mejs-shuffle-on":"mejs-shuffle-off")+'"><button type="button" aria-controls="'+e.id+'" title="'+e.options.shuffleText+'"></button></div>').appendTo(l).click((function(l){e.options.shuffle=!e.options.shuffle,t(o).trigger("mep-shuffletoggle",[e.options.shuffle]),e.options.shuffle?i.removeClass("mejs-shuffle-off").addClass("mejs-shuffle-on"):i.removeClass("mejs-shuffle-on").addClass("mejs-shuffle-off")}));this.shuffleToggle=this.controls.find(".mejs-shuffle-button")},shuffleToggleClick:function(){this.shuffleToggle.trigger("click")},buildprevtrack:function(e,l,s,o){t('<div class="mejs-button mejs-prevtrack-button mejs-prevtrack"><button type="button" aria-controls="'+e.id+'" title="'+e.options.prevText+'"></button></div>').appendTo(l).click((function(l){t(o).trigger("mep-playprevtrack"),e.playPrevTrack()}));this.prevTrack=this.controls.find(".mejs-prevtrack-button")},prevTrackClick:function(){this.prevTrack.trigger("click")},buildnexttrack:function(e,l,s,o){t('<div class="mejs-button mejs-nexttrack-button mejs-nexttrack"><button type="button" aria-controls="'+e.id+'" title="'+e.options.nextText+'"></button></div>').appendTo(l).click((function(l){t(o).trigger("mep-playnexttrack"),e.playNextTrack()}));this.nextTrack=this.controls.find(".mejs-nexttrack-button")},nextTrackClick:function(){this.nextTrack.trigger("click")},buildplaylist:function(e,l,s,o){var i=t('<div class="mejs-button mejs-playlist-button '+(e.options.playlist?"mejs-hide-playlist":"mejs-show-playlist")+'"><button type="button" aria-controls="'+e.id+'" title="'+e.options.playlistText+'"></button></div>').appendTo(l).click((function(l){e.options.playlist=!e.options.playlist,t(o).trigger("mep-playlisttoggle",[e.options.playlist]),e.options.playlist?(s.children(".mejs-playlist").show(),i.removeClass("mejs-show-playlist").addClass("mejs-hide-playlist")):(s.children(".mejs-playlist").hide(),i.removeClass("mejs-hide-playlist").addClass("mejs-show-playlist"))}));this.playlistToggle=this.controls.find(".mejs-playlist-button")},playlistToggleClick:function(){this.playlistToggle.trigger("click")},buildplaylistfeature:function(e,l,s,o){var i=t('<div class="mejs-playlist mejs-layer"><ul class="mejs"></ul></div>').appendTo(s);e.options.playlist||i.hide(),"bottom"==e.options.playlistposition?i.css("top",e.options.audioHeight+"px"):i.css("bottom",e.options.audioHeight+"px");var n=[];for(var a in t("#"+e.id).find(".mejs-mediaelement source").each((function(e,l){if(""!=t.trim(this.src)){var s={};s.source=t.trim(this.src),""!=t.trim(this.title)?s.name=t.trim(this.title):s.name=(o=s.source,(i=o.split("/")).length>0?decodeURIComponent(i[i.length-1]):""),n.push(s)}var o,i})),n)s.find(".mejs-playlist > ul").append('<li data-url="'+n[a].source+'" title="'+n[a].name+'">'+n[a].name+"</li>");s.find("li:first").addClass("current played"),s.find(".mejs-playlist > ul li").click((function(l){t(this).hasClass("current")?e.play():(t(this).addClass("played"),e.playTrack(t(this)))})),o.addEventListener("ended",(function(t){e.playNextTrack()}),!1)},playNextTrack:function(){var t=this,e=t.layers.find(".mejs-playlist > ul > li"),l=e.filter(".current"),s=e.not(".played");if(s.length<1&&(l.removeClass("played").siblings().removeClass("played"),s=e.not(".current")),t.options.shuffle)var o=Math.floor(Math.random()*s.length),i=s.eq(o);else(i=l.next()).length<1&&t.options.loop&&(i=l.siblings().first());1==i.length&&(i.addClass("played"),t.playTrack(i))},playPrevTrack:function(){var t=this,e=t.layers.find(".mejs-playlist > ul > li"),l=e.filter(".current"),s=e.filter(".played").not(".current");if(s.length<1&&(l.removeClass("played"),s=e.not(".current")),t.options.shuffle)var o=Math.floor(Math.random()*s.length),i=s.eq(o);else(i=l.prev()).length<1&&t.options.loop&&(i=l.siblings().last());1==i.length&&(l.removeClass("played"),t.playTrack(i))},playTrack:function(t){var e=this;e.pause(),e.setSrc(t.attr("data-url")),e.load(),e.play(),t.addClass("current").siblings().removeClass("current")},playTrackURL:function(t){var e=this.layers.find(".mejs-playlist > ul > li").filter('[data-url="'+t+'"]');this.playTrack(e)}})}(mejs.$);